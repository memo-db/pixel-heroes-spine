var id,category="character",sortBy="id",viewMode="list",a=0;function getUrlValue(e){return new URL(window.location.href).searchParams.get(e)}function loadingModel(){let e=document.querySelector("#container");e.innerHTML="",new spine.SpinePlayer("container",{skelUrl:"asset/animation/"+category+"/"+id+".skel",atlasUrl:"asset/animation/"+category+"/"+id+".atlas",premultipliedAlpha:!1,showControls:!1,backgroundColor:"#00000000",alpha:!0,viewport:{padLeft:0,padRight:0,padTop:0,padBottom:0}})}function createTable(){const n=document.querySelector("#container-data");n.innerHTML="",fetch("data/"+category+".json").then(e=>e.json()).then(t=>{function i(e,t){switch(sortBy){case"id":return e.id<t.id?-1:e.id>t.id?1:0;case"name":return e.name<t.name?-1:e.name>t.name?1:0;case"content_rating":return e.content_rating>t.content_rating?-1:e.content_rating<t.content_rating?1:0;case"rating":return e.rating>t.rating?-1:e.rating<t.rating?1:0}}switch(viewMode){case"list":document.getElementById("list-view").checked=!0;for(item of t[category]){let e=document.createElement("div");e.classList.add("row-item"),n.appendChild(e),e.innerHTML=`
                    <div class="list-item">
                        <label>
                            <input id="${item.id}" name="inventoryItems" type="radio" value="${item.id}">
                                <span>${item.id}</span>
                            </input>
                        </label>
                    </div><!--
                    <div class="list-item">
                        <label for="${item.id}">
                            <span>${item.name}</span>
                        </label>
                    </div>-->
                    <div class="list-item">
                        <label for="${item.id}">
                            <span>${item.content_rating}<span>
                        </label>
                    </div>
                    <div class="list-item">
                        <label for="${item.id}">
                            <span>${item.rating}<span>
                        </label>
                    </div>`,t[category].sort(i)}break;case"grid":document.getElementById("grid-view").checked=!0;let e=document.createElement("div");e.classList.add("grid-container");for(item of t[category])e.innerHTML+=`
                    <div class="grid-item">
                        <input id="${item.id}" name="inventoryItems" type="radio" value="${item.id}">
                        <label for="${item.id}">
                            <img class="cover" title="${item.id}
${item.content_rating}
${item.rating}" src="asset/images/icon/card/${item.id}.png" alt="${item.id}">
                        </label>
                    </div>`,t[category].sort(i),n.appendChild(e)}n.oninput=e=>{id=n.inventoryItems.value,loadingModel();var t=window.location.href,a="/?category="+category+"&id="+id,t=null!=t.match(/\/$/)?t.replace(/\/$/,a):t.replace(/\/\?.*/,a);window.history.pushState(null,null,t)},0==a&&(document.getElementById(id).checked=!0,a++)})}!function(){const e=document.querySelectorAll(".button-sort");for(var t=0;t<e.length;t++)e[t].addEventListener("click",function(e){sortBy=e.target.getAttribute("data"),createTable()});const a=document.querySelectorAll("#character, #role");for(t=0;t<a.length;t++)a[t].addEventListener("click",function(e){category=e.target.getAttribute("value"),createTable()});const i=document.querySelectorAll("#grid-view, #list-view");for(t=0;t<i.length;t++)i[t].addEventListener("click",function(e){viewMode=e.target.getAttribute("value"),createTable()})}(),function(){var e=(e=window.location.href).replace("index.html","");window.history.replaceState(null,null,e)}(),function(){var e=window.location.href;id=getUrlValue("id"),null!=e.match(/\/$/)?(document.getElementById("character").click(),a++):(category=getUrlValue("category"),loadingModel()),null!=e.match(/\/\?category=character/)&&document.getElementById(category).click(),null!=e.match(/\/\?category=role/)&&document.getElementById(category).click()}();